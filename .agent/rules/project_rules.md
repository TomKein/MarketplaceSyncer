# Правила разработки проекта

## 1. Язык и Документация
- **Основной Проект**: `MarketplaceSyncer.Service` является главным проектом. Все изменения по умолчанию вносятся туда, если не указано иное (или `Legacy`).
- Все общение, планы реализации (implementation plans), списки задач (task lists), комментарии к коду и другие артефакты должны быть на **русском языке**.
- XML-комментарии (`<summary>`), логирование, отчеты — **строго на русском**.
- Никаких эмодзи в комментариях к коду или логах.

## 2. Технологический Стек и Производительность
- **Framework**: .NET 10, C# 14.
- **Библиотеки**: System.Text.Json, Serilog, Linq2Db PostgreSQL, FluentMigrator, xUnit v3, ErrorOr (Result pattern).
- **Даты и Время**: Всегда используйте `DateTimeOffset` вместо `DateTime` для полей даты и времени в моделях и DTO.
- **Business.ru API IDs**: Тип `int` в документации Business.ru соответствует `PHP int` (64-bit), поэтому в C# всегда используйте `long` для ID и ссылок на ID.

## 3. Базы Данных и Миграции
- **Новые Сущности**: Создавать новые файлы миграций только для совершенно новых сущностей.
- **Обновления**: НЕ СОЗДАВАЙТЕ последовательные миграции для одной и той же сущности. Изменяйте существующие файлы миграций.
- **Совместимость**: Обратная совместимость не требуется.

## 4. Стиль Кода и Best Practices
- **Primary Constructors**: Используйте первичные конструкторы C# 14 по умолчанию.
- **Namespaces**: Используйте file-scoped namespaces.
- **Типы**: Всегда предпочитайте короткие имена типов и `using`, избегайте полных имен (FQN), если нет конфликтов.
- **Обработка Ошибок**: Используйте библиотеку `ErrorOr`.
- **DRY**: Приоритет читаемости и DRY, если это не конфликтует с NativeAOT.

## 5. Рабочий Процесс (Workflow)
- **Planning**: Анализ, `implementation_plan.md`, утверждение пользователем.
- **Initiation**: Feature-ветки `feature/task-title`.
- **Development**: Commit & Push после каждой собираемой итерации.
- **Completion**: Code Review, Walkthrough, Merge Request.
- **NuGet**: Использовать CPM (`Directory.Packages.props`).
- **Файловые операции**: Для переименования или перемещения файлов всегда используйте `git mv` (через терминал) или команды PowerShell `Rename-Item`/`Move-Item`, чтобы сохранить историю Git. Избегайте сочетания `del` + `write_to_file`.
